# - alias: Wakeup - Slowly Turn Off Light
#   id: '1510113291429'
#   trigger:
#   - platform: time
#     at: 07:00:00
#   condition: []
#   action:
#     - service: light.turn_on
#       entity_id: light.sengled_z01a19nae26_0301dbb2_1
#       data:
#         brightness: 0
#         kelvin: 2700
#         transition: 10

- alias: Wakeup - Slowly Turn On Light
  id: '1510114284366'
  trigger:
  - platform: time
    at: '07:45:00'
  condition:
  - condition: time
    weekday:
    - mon
    - tue
    - wed
    - thu
    - fri
  action:
  - service: script.slowly_turn_on_lights

- alias: Come home
  trigger:
  - entity_id: group.people
    platform: state
    from: not_home
    to: home
  action:
  - service: script.turn_off_cameras
  - service: script.turn_on_the_fans
  - service: script.turn_on_extra_plugs

- alias: Leave home
  trigger:
  - entity_id: group.people
    platform: state
    from: home
    to: not_home
  action:
  - service: script.turn_on_cameras
  - service: script.turn_off_the_fans
  - service: script.turn_off_the_lights
  - service: script.turn_off_extra_plugs

- alias: Basement Light Left On
  trigger:
  - entity_id: sensor.basement_light
    platform: numeric_state
    above: 40
    for:
      minutes: 20
  action:
  - service: notify.steve_hangouts
    data:
      message: The basement lights are on
  - service: notify.melanie_hangouts
    data:
      message: The basement lights are on
  - service: script.flash_the_lights

- alias: Watch TV Living Room
  trigger:
    - entity_id: media_player.roku_yr00aa293226
      platform: state
      to: 'playing'
  action:
    - service: switch.turn_off
      entity_id: switch.extra_plug

- alias: Dusk
  trigger:
  - entity_id: sensor.living_room_light
    platform: numeric_state
    below: 8
    for:
      minutes: 5
  action:
  - service: input_boolean.turn_off
    data:
      entity_id: input_boolean.light_outside

- alias: Dawn
  trigger:
  - entity_id: sensor.living_room_light
    platform: numeric_state
    above: 30
    for:
      minutes: 3
  action:
  - service: input_boolean.turn_on
    data:
      entity_id: input_boolean.light_outside

- alias: Dusk - Turn on light
  trigger:
  - entity_id: input_boolean.light_outside
    platform: state
    to: 'off'
  condition:
  - entity_id: group.people
    condition: state
    state: home
  action:
  - service: script.turn_on_some_lights

- alias: Home - Turn on light
  id: '1510273891568'
  trigger:
  - entity_id: group.people
    platform: state
    from: not_home
    to: home
  condition:
    condition: state
    entity_id: input_boolean.light_outside
    state: 'off'
  # condition:
  # - below: '1'
  #   condition: numeric_state
  #   entity_id: sun.sun
  #   value_template: '{{ state.attributes.elevation }}'
  action:
  - service: script.turn_on_some_lights


# This could interfere with the wakeup script
# Could use another bool to track if wakeup is currently running
# - alias: Dawn - Turn off light
#   trigger:
#   - entity_id: sensor.living_room_light
#     platform: numeric_state
#     below: 10
#     for:
#       minutes: 5
#   action:
#   - service: script.turn_off_the_lights

- alias: Washer Running
  trigger:
  - entity_id: sensor.washer
    platform: state
    from: 'off'
    to: 'on'
    for:
      minutes: 3
  action:
  - service: input_boolean.turn_on
    data:
      entity_id: input_boolean.washer_running

- alias: Washer Stopped
  trigger:
  - entity_id: sensor.washer
    platform: state
    from: 'on'
    to: 'off'
    for:
      minutes: 6
  action:
  - service: input_boolean.turn_off
    data:
      entity_id: input_boolean.washer_running

- alias: Washer Done
  trigger:
  - entity_id: input_boolean.washer_running
    platform: state
    to: 'off'
  action:
  - service: notify.steve_hangouts
    data:
      message: The washer is done
  - service: notify.melanie_hangouts
    data:
      message: The washer is done

- alias: Dryer Running
  trigger:
  - entity_id: sensor.dryer
    platform: state
    from: 'off'
    to: 'on'
    for:
      minutes: 3
  action:
  - service: input_boolean.turn_on
    data:
      entity_id: input_boolean.dryer_running

- alias: Dryer Stopped
  trigger:
  - entity_id: sensor.dryer
    platform: state
    from: 'on'
    to: 'off'
    for:
      minutes: 6
  action:
  - service: input_boolean.turn_off
    data:
      entity_id: input_boolean.dryer_running

- alias: Dryer Done
  trigger:
  - entity_id: input_boolean.dryer_running
    platform: state
    to: 'off'
  action:
  - service: notify.steve_hangouts
    data:
      message: The dryer is done
  - service: notify.melanie_hangouts
    data:
      message: The dryer is done

